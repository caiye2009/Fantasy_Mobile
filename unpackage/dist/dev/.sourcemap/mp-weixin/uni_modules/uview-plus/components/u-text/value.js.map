{"version":3,"file":"value.js","sources":["uni_modules/uview-plus/components/u-text/value.js"],"sourcesContent":["import { error, priceFormat, timeFormat } from '../../libs/function/index';\nimport test from '../../libs/function/test';\nexport default {\n    computed: {\n        // 经处理后需要显示的值\n        value() {\n            const {\n                text,\n                mode,\n                format,\n                href\n            } = this\n            // 价格类型\n            if (mode === 'price') {\n                // 如果text不为金额进行提示\n                if (!/^\\d+(\\.\\d+)?$/.test(text)) {\n                    error('金额模式下，text参数需要为金额格式');\n                }\n                // 进行格式化，判断用户传入的format参数为正则，或者函数，如果没有传入format，则使用默认的金额格式化处理\n                if (test.func(format)) {\n                    // 如果用户传入的是函数，使用函数格式化\n                    return format(text)\n                }\n                // 如果format非正则，非函数，则使用默认的金额格式化方法进行操作\n                return priceFormat(text, 2)\n            } if (mode === 'date') {\n                // 判断是否合法的日期或者时间戳\n                !test.date(text) && error('日期模式下，text参数需要为日期或时间戳格式')\n                // 进行格式化，判断用户传入的format参数为正则，或者函数，如果没有传入format，则使用默认的格式化处理\n                if (test.func(format)) {\n                    // 如果用户传入的是函数，使用函数格式化\n                    return format(text)\n                } if (format) {\n                    // 如果format非正则，非函数，则使用默认的时间格式化方法进行操作\n                    return timeFormat(text, format)\n                }\n                // 如果没有设置format，则设置为默认的时间格式化形式\n                return timeFormat(text, 'yyyy-mm-dd')\n            } if (mode === 'phone') {\n                // 判断是否合法的手机号\n                // !test.mobile(text) && error('手机号模式下，text参数需要为手机号码格式')\n                if (test.func(format)) {\n                    // 如果用户传入的是函数，使用函数格式化\n                    return format(text)\n                } if (format === 'encrypt') {\n                    // 如果format为encrypt，则将手机号进行星号加密处理\n                    return `${text.substr(0, 3)}****${text.substr(7)}`\n                }\n                return text\n            } if (mode === 'name') {\n                // 判断是否合法的字符粗\n                !(typeof (text) === 'string') && error('姓名模式下，text参数需要为字符串格式')\n                if (test.func(format)) {\n                    // 如果用户传入的是函数，使用函数格式化\n                    return format(text)\n                } if (format === 'encrypt') {\n                    // 如果format为encrypt，则将姓名进行星号加密处理\n                    return this.formatName(text)\n                }\n                return text\n            } if (mode === 'link') {\n                // 判断是否合法的字符粗\n                !test.url(href) && error('超链接模式下，href参数需要为URL格式')\n                return text\n            }\n            return text\n        }\n    },\n    methods: {\n        // 默认的姓名脱敏规则\n        formatName(name) {\n            let value = ''\n            if (name.length === 2) {\n                value = name.substr(0, 1) + '*'\n            } else if (name.length > 2) {\n                let char = ''\n                for (let i = 0, len = name.length - 2; i < len; i++) {\n                    char += '*'\n                }\n                value = name.substr(0, 1) + char + name.substr(-1, 1)\n            } else {\n                value = name\n            }\n            return value\n        }\n    }\n}\n"],"names":["value","text","mode","format","href","error","test","priceFormat","timeFormat","name","char","i","len"],"mappings":"sGAEeA,EAAA,CACX,SAAU,CAEN,OAAQ,CACJ,KAAM,CACF,KAAAC,EACA,KAAAC,EACA,OAAAC,EACA,KAAAC,CAChB,EAAgB,KAEJ,OAAIF,IAAS,SAEJ,gBAAgB,KAAKD,CAAI,GAC1BI,EAAK,MAAC,qBAAqB,EAG3BC,EAAI,KAAC,KAAKH,CAAM,EAETA,EAAOF,CAAI,EAGfM,EAAW,YAACN,EAAM,CAAC,GACxBC,IAAS,QAEX,CAACI,EAAI,KAAC,KAAKL,CAAI,GAAKI,EAAAA,MAAM,yBAAyB,EAE/CC,EAAI,KAAC,KAAKH,CAAM,EAETA,EAAOF,CAAI,EAChBE,EAEKK,EAAU,WAACP,EAAME,CAAM,EAG3BK,EAAU,WAACP,EAAM,YAAY,GAClCC,IAAS,QAGPI,EAAI,KAAC,KAAKH,CAAM,EAETA,EAAOF,CAAI,EAChBE,IAAW,UAEN,GAAGF,EAAK,OAAO,EAAG,CAAC,CAAC,OAAOA,EAAK,OAAO,CAAC,CAAC,GAE7CA,EACLC,IAAS,QAET,OAAQD,GAAU,UAAaI,EAAAA,MAAM,sBAAsB,EACzDC,EAAI,KAAC,KAAKH,CAAM,EAETA,EAAOF,CAAI,EAChBE,IAAW,UAEN,KAAK,WAAWF,CAAI,EAExBA,IACLC,IAAS,QAEX,CAACI,EAAI,KAAC,IAAIF,CAAI,GAAKC,EAAAA,MAAM,uBAAuB,EACzCJ,EAGd,CACJ,EACD,QAAS,CAEL,WAAWQ,EAAM,CACb,IAAIT,EAAQ,GACZ,GAAIS,EAAK,SAAW,EAChBT,EAAQS,EAAK,OAAO,EAAG,CAAC,EAAI,YACrBA,EAAK,OAAS,EAAG,CACxB,IAAIC,EAAO,GACX,QAASC,EAAI,EAAGC,EAAMH,EAAK,OAAS,EAAGE,EAAIC,EAAKD,IAC5CD,GAAQ,IAEZV,EAAQS,EAAK,OAAO,EAAG,CAAC,EAAIC,EAAOD,EAAK,OAAO,GAAI,CAAC,CACpE,MACgBT,EAAQS,EAEZ,OAAOT,CACV,CACJ,CACL"}