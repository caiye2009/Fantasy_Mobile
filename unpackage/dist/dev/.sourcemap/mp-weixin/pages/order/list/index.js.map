{"version":3,"file":"index.js","sources":["pages/order/list/index.vue","../../../OneDrive/Desktop/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvbGlzdC9pbmRleC52dWU"],"sourcesContent":["<!-- pages/order/list/index.vue -->\n<template>\n  <view class=\"order-page\">\n    <!-- 状态栏和导航栏 -->\n    <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n    <u-navbar\n      :title=\"pageTitle\"\n      :autoBack=\"true\"\n      leftIcon=\"arrow-left\"\n      :placeholder=\"true\"\n      :safeAreaInsetTop=\"true\"\n    >\n      <template #right>\n        <view class=\"navbar-right\">\n          <u-icon name=\"more-dot-fill\" size=\"20\" color=\"#333\" @click=\"showMoreMenu\"></u-icon>\n          <view class=\"detail-icon\" @click=\"goToDetail\">\n            <u-icon name=\"info-circle\" size=\"20\" color=\"#333\"></u-icon>\n          </view>\n        </view>\n      </template>\n    </u-navbar>\n\n    <!-- 搜索区域 -->\n    <view class=\"search-box\">\n      <u-search\n        v-model=\"searchKeyword\"\n        placeholder=\"关键词搜索, 如订单编号, 负责人\"\n        :showAction=\"false\"\n        shape=\"square\"\n        bgColor=\"#f5f5f5\"\n        @search=\"handleSearch\"\n        @clear=\"handleClearSearch\"\n      ></u-search>\n    </view>\n\n    <!-- 标签页 -->\n    <u-tabs\n      :list=\"tabList\"\n      :current=\"currentTab\"\n      @change=\"handleTabChange\"\n      :activeStyle=\"{\n        color: '#2979ff',\n        fontWeight: 'bold'\n      }\"\n      :inactiveStyle=\"{\n        color: '#666'\n      }\"\n      :lineColor=\"'#2979ff'\"\n      :lineWidth=\"30\"\n      :lineHeight=\"3\"\n      itemStyle=\"padding-left: 15px; padding-right: 15px; height: 44px;\"\n    ></u-tabs>\n\n    <!-- 订单列表 -->\n    <scroll-view\n      class=\"task-list\"\n      :refresher-enabled=\"true\"\n      :refresher-triggered=\"refreshing\"\n      @refresherrefresh=\"onRefresh\"\n      @scrolltolower=\"loadMore\"\n      scroll-y\n    >\n      <!-- 空状态 -->\n      <u-empty\n        v-if=\"taskList.length === 0 && !loading\"\n        mode=\"list\"\n        icon=\"http://cdn.uviewui.com/uview/empty/list.png\"\n        text=\"暂无巡检订单\"\n      >\n        <template #bottom>\n          <u-button\n            type=\"primary\"\n            text=\"刷新\"\n            @click=\"fetchTaskList\"\n            size=\"mini\"\n            style=\"margin-top: 20rpx;\"\n          ></u-button>\n        </template>\n      </u-empty>\n\n      <!-- 加载中 -->\n      <view v-if=\"loading && taskList.length === 0\" class=\"loading-container\">\n        <u-loading-icon text=\"加载中...\" textSize=\"16\" color=\"#2979ff\"></u-loading-icon>\n      </view>\n\n      <!-- 订单卡片列表 -->\n      <view v-else>\n        <task-card\n          v-for=\"(task, index) in taskList\"\n          :key=\"task.id || index\"\n          :task=\"task\"\n          @click=\"handleTaskClick(task)\"\n        />\n      </view>\n\n      <!-- 加载更多 -->\n      <view v-if=\"loadingMore\" class=\"load-more\">\n        <u-loading-icon text=\"加载中...\" size=\"20\" textSize=\"14\" color=\"#999\"></u-loading-icon>\n      </view>\n\n      <view v-if=\"noMore\" class=\"no-more\">没有更多了</view>\n    </scroll-view>\n\n    <!-- 底部扫一扫按钮 -->\n    <view class=\"scan-button-container\">\n      <u-button\n        type=\"primary\"\n        shape=\"circle\"\n        @click=\"handleScan\"\n        :customStyle=\"{\n          height: '88rpx',\n          fontSize: '32rpx',\n          fontWeight: '500'\n        }\"\n      >\n        <u-icon name=\"scan\" size=\"20\" color=\"#fff\" style=\"margin-right: 8rpx;\"></u-icon>\n        扫一扫\n      </u-button>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\nimport TaskCard from '@/components/order_card.vue'\nimport \"./index.scss\"\n// 状态栏高度\nconst statusBarHeight = ref(uni.getSystemInfoSync().statusBarHeight || 0)\n\n// 页面数据\nconst pageTitle = ref('订单列表')\nconst searchKeyword = ref('')\nconst currentTab = ref(0)\nconst refreshing = ref(false)\nconst loading = ref(false)\nconst loadingMore = ref(false)\nconst noMore = ref(false)\nconst pageNum = ref(1)\nconst pageSize = ref(10)\nconst taskList = ref([])\n\n// 标签页配置\nconst tabList = ref([\n  { name: '待办', value: 'pending' },\n  { name: '全部', value: 'all' },\n  { name: '已完成', value: 'completed' },\n  { name: '未完成', value: 'uncompleted' },\n  { name: '其他', value: 'other' }\n])\n// 模拟订单数据\nconst mockTasks = [\n  {\n    id: 1,\n    name: 'A9二排5号机',\n    deviceNo: 'A9-2-5',\n    status: 'online',\n    statusText: '在线',\n    statusColor: '#2979ff',\n    site: '湖南京广线-长沙南站-A区9号检票口',\n    serialNo: 'SF7336190300055',\n    responsible: '赵佳志',\n    date: '2024-01-15 09:30',\n    priority: 'high'\n  },\n  {\n    id: 2,\n    name: 'A9二排5号机',\n    deviceNo: 'A9-2-5',\n    status: 'offline',\n    statusText: '离线',\n    statusColor: '#909399',\n    site: '湖南京广线-长沙南站-A区9号检票口',\n    serialNo: 'SF7336190300055',\n    responsible: '赵佳志',\n    date: '2024-01-15 10:15',\n    priority: 'medium'\n  },\n  {\n    id: 3,\n    name: 'A9二排5号机',\n    deviceNo: 'A9-2-5',\n    status: 'fault',\n    statusText: '故障',\n    statusColor: '#fa3534',\n    site: '湖南京广线-长沙南站-A区9号检票口',\n    serialNo: 'SF7336190300055',\n    responsible: '赵佳志',\n    date: '2024-01-15 11:20',\n    priority: 'high'\n  },\n  {\n    id: 4,\n    name: 'A9二排5号机',\n    deviceNo: 'A9-2-5',\n    status: 'online',\n    statusText: '在线',\n    statusColor: '#2979ff',\n    site: '湖南京广线-长沙南站-A区9号检票口',\n    serialNo: 'SF7336190300055',\n    responsible: '赵佳志',\n    date: '2024-01-15 13:45',\n    priority: 'low'\n  }\n]\n\n// 事件处理函数\nconst handleTabChange = (e) => {\n  currentTab.value = e.index\n  refreshTaskList()\n}\n\nconst handleSearch = (value) => {\n  console.log('搜索关键词:', value)\n  refreshTaskList()\n}\n\nconst handleClearSearch = () => {\n  searchKeyword.value = ''\n  refreshTaskList()\n}\n\nconst handleTaskClick = (task) => {\n  console.log('点击订单:', task)\n  uni.navigateTo({\n    url: `/pages/order/detail/index?id=${task.id}`\n  })\n}\n\nconst handleScan = () => {\n  // 调用扫一扫功能\n  uni.scanCode({\n    success: (res) => {\n      console.log('扫码结果:', res.result)\n      uni.showToast({\n        title: '扫码成功',\n        icon: 'success'\n      })\n      \n      // 这里可以处理扫码结果，比如跳转到对应设备页面\n      // handleScanResult(res.result)\n    },\n    fail: (err) => {\n      console.error('扫码失败:', err)\n      uni.showToast({\n        title: '扫码失败，请重试',\n        icon: 'none'\n      })\n    }\n  })\n}\n\nconst showMoreMenu = () => {\n  uni.showActionSheet({\n    title: '更多操作',\n    itemList: ['刷新列表', '筛选设置', '导出数据', '关于'],\n    success: (res) => {\n      const index = res.tapIndex\n      switch (index) {\n        case 0:\n          refreshTaskList()\n          break\n        case 1:\n          showFilterModal()\n          break\n        case 2:\n          exportData()\n          break\n        case 3:\n          showAbout()\n          break\n      }\n    }\n  })\n}\n\nconst goToDetail = (e) => {\n  uni.navigateTo({\n    url: '/pages/order/stats'\n  })\n}\n\n// 数据获取函数\nconst fetchTaskList = async (isRefresh = false, isLoadMore = false) => {\n  if (loading.value || (isLoadMore && noMore.value)) return\n  \n  if (isRefresh) {\n    refreshing.value = true\n    pageNum.value = 1\n  } else if (isLoadMore) {\n    loadingMore.value = true\n    pageNum.value++\n  } else {\n    loading.value = true\n  }\n  \n  try {\n    // 模拟 API 请求\n    await new Promise(resolve => setTimeout(resolve, 1000))\n    \n    if (isRefresh || !isLoadMore) {\n      taskList.value = [...mockTasks]\n    } else {\n      // 模拟加载更多数据\n      const moreTasks = mockTasks.map(task => ({\n        ...task,\n        id: task.id + taskList.value.length\n      }))\n      taskList.value = [...taskList.value, ...moreTasks]\n    }\n    \n    // 模拟没有更多数据的情况\n    if (isLoadMore && pageNum.value >= 3) {\t\n      noMore.value = true\n    }\n  } catch (error) {\n    console.error('获取订单列表失败:', error)\n    uni.showToast({\n      title: '加载失败',\n      icon: 'none'\n    })\n  } finally {\n    loading.value = false\n    loadingMore.value = false\n    refreshing.value = false\n  }\n}\n\nconst refreshTaskList = () => {\n  fetchTaskList(true)\n}\n\nconst loadMore = () => {\n  if (!noMore.value) {\n    fetchTaskList(false, true)\n  }\n}\n\nconst onRefresh = () => {\n  refreshTaskList()\n}\n\n// 辅助函数\nconst showFilterModal = () => {\n  uni.showModal({\n    title: '筛选设置',\n    content: '筛选功能开发中...',\n    showCancel: false\n  })\n}\n\nconst exportData = () => {\n  uni.showToast({\n    title: '导出功能开发中',\n    icon: 'none'\n  })\n}\n\nconst showAbout = () => {\n  uni.showModal({\n    title: '关于',\n    content: '巡检订单管理系统 v1.0.0',\n    showCancel: false\n  })\n}\n\n// 生命周期\nonLoad(() => {\n  fetchTaskList()\n})\n\nonShow(() => {\n  // 页面显示时刷新数据\n  refreshTaskList()\n})\n</script>\n\n","import MiniProgramPage from 'C:/Users/caiye/Documents/HBuilderProjects/Fantasy_Mobile/pages/order/list/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onLoad","onShow","MiniProgramPage"],"mappings":"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"}