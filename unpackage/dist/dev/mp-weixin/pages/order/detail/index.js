"use strict";const e=require("../../../common/vendor.js");if(!Array){const l=e.resolveComponent("u-icon"),u=e.resolveComponent("u-button"),n=e.resolveComponent("u-image"),a=e.resolveComponent("u-action-sheet"),c=e.resolveComponent("u-modal"),t=e.resolveComponent("u-loading-page");(l+u+n+a+c+t)()}const T=()=>"../../../uni_modules/uview-plus/components/u-icon/u-icon.js",B=()=>"../../../uni_modules/uview-plus/components/u-button/u-button.js",F=()=>"../../../uni_modules/uview-plus/components/u-image/u-image.js",M=()=>"../../../uni_modules/uview-plus/components/u-action-sheet/u-action-sheet.js",E=()=>"../../../uni_modules/uview-plus/components/u-modal/u-modal.js",S=()=>"../../../uni_modules/uview-plus/components/u-loading-page/u-loading-page.js";Math||(T+B+F+M+E+S)();const j={__name:"index",setup(l){const u=e.ref(!0),n=e.ref(!1),a=e.ref(!1),c=e.computed(()=>[0,2,3].includes(t.status)),t=e.reactive({id:"",orderNo:"",status:1,createTime:"",paymentMethod:"",deliveryMethod:"",totalAmount:0,shippingFee:0,discountAmount:0,payAmount:0,remark:"",goods:[],address:{}}),m=e.computed(()=>{const s=[{name:"查看物流",value:"logistics"},{name:"联系客服",value:"customerService"},{name:"复制订单号",value:"copy"}];return t.status===1&&s.unshift({name:"取消订单",value:"cancel"}),s});e.onLoad(s=>{s.id&&(t.id=s.id,p(s.id))});const p=s=>{u.value=!0,setTimeout(()=>{Object.assign(t,{id:s,orderNo:"20231225123456789",status:1,createTime:"2023-12-25 14:30:25",paymentMethod:"微信支付",deliveryMethod:"快递配送",totalAmount:198,shippingFee:10,discountAmount:20,payAmount:188,remark:"请尽快发货，谢谢！",goods:[{id:1,name:"商品名称示例商品名称示例商品名称示例",image:"https://via.placeholder.com/80x80",spec:"颜色：白色；尺码：M",price:99,quantity:2},{id:2,name:"另一个商品示例",image:"https://via.placeholder.com/80x80",spec:"颜色：黑色；尺码：L",price:89,quantity:1}],address:{receiver:"张三",phone:"13800138000",fullAddress:"广东省深圳市南山区科技园科苑路100号"}}),u.value=!1},800)},_=s=>({0:"close-circle-fill",1:"clock-fill",2:"car-fill",3:"checkmark-circle-fill"})[s]||"info-circle-fill",f=s=>({0:"#909399",1:"#f9ae3d",2:"#2979ff",3:"#19be6b"})[s]||"#909399",h=s=>({0:"已取消",1:"待付款",2:"待收货",3:"已完成"})[s]||"未知状态",v=s=>({0:"订单已取消",1:"请在30分钟内完成支付",2:"商品正在运输中",3:"交易已完成"})[s]||"",g=()=>{e.index.showModal({title:"提示",content:"模拟支付流程",success:s=>{s.confirm&&(e.index.showToast({title:"支付成功",icon:"success"}),t.status=2)}})},r=()=>{e.index.showModal({title:"取消订单",content:"确定要取消这个订单吗？",success:s=>{s.confirm&&(t.status=0,e.index.showToast({title:"订单已取消",icon:"success"}))}})},y=()=>{e.index.showModal({title:"确认收货",content:"请确认已收到商品",success:s=>{s.confirm&&(t.status=3,e.index.showToast({title:"确认收货成功",icon:"success"}))}})},x=()=>{a.value=!0},A=()=>{e.index.showToast({title:"删除成功",icon:"success"}),setTimeout(()=>{e.index.navigateBack()},1500),a.value=!1},b=()=>{e.index.showToast({title:"已加入购物车",icon:"success"})},w=()=>{e.index.navigateTo({url:"/pages/afterSale/apply"})},d=()=>{e.index.setClipboardData({data:t.orderNo,success:()=>{e.index.showToast({title:"复制成功",icon:"success"})}})},C=s=>{switch(n.value=!1,s.value){case"copy":d();break;case"logistics":e.index.navigateTo({url:`/pages/order/logistics?id=${t.id}`});break;case"customerService":e.index.makePhoneCall({phoneNumber:"400-123-4567"});break;case"cancel":r();break}};return(s,i)=>e.e({a:e.p({name:_(t.status),size:"40",color:f(t.status)}),b:e.t(h(t.status)),c:e.t(v(t.status)),d:t.status===1},t.status===1?{e:e.o(g),f:e.p({type:"primary",size:"small",text:"立即支付"}),g:e.o(r),h:e.p({type:"default",size:"small",text:"取消订单"})}:{},{i:e.p({name:"map-fill",color:"#2979ff",size:"20"}),j:e.t(t.address.receiver),k:e.t(t.address.phone),l:e.t(t.address.fullAddress),m:e.p({name:"bag-fill",color:"#2979ff",size:"20"}),n:e.f(t.goods,(o,D,k)=>({a:"a8bbe39b-5-"+k,b:e.p({src:o.image,width:"80",height:"80",radius:"8"}),c:e.t(o.name),d:e.t(o.spec),e:e.t(o.price),f:e.t(o.quantity),g:D})),o:e.p({name:"order",color:"#2979ff",size:"20"}),p:e.t(t.orderNo),q:e.o(d),r:e.p({name:"file-text",size:"18"}),s:e.t(t.createTime),t:e.t(t.paymentMethod),v:e.t(t.deliveryMethod),w:t.remark},t.remark?{x:e.t(t.remark)}:{},{y:e.t(t.totalAmount),z:e.t(t.shippingFee),A:e.t(t.discountAmount),B:e.t(t.payAmount),C:c.value},c.value?e.e({D:t.status===2},t.status===2?{E:e.o(y),F:e.p({type:"primary",text:"确认收货"})}:{},{G:t.status===0},t.status===0?{H:e.o(x),I:e.p({type:"error",text:"删除订单"})}:{},{J:t.status===3},t.status===3?{K:e.o(b),L:e.p({type:"default",text:"再次购买"})}:{},{M:t.status===3},t.status===3?{N:e.o(w),O:e.p({type:"primary",plain:!0,text:"申请售后"})}:{}):{},{P:e.o(o=>n.value=!1),Q:e.o(C),R:e.p({show:n.value,actions:m.value,title:"更多操作"}),S:e.o(A),T:e.o(o=>a.value=!1),U:e.p({show:a.value,title:"确认删除",content:"确定要删除这个订单吗？删除后不可恢复。",showCancelButton:!0}),V:e.p({loading:u.value,bgColor:"#f8f8f8"})})}},z=e._export_sfc(j,[["__scopeId","data-v-a8bbe39b"]]);wx.createPage(z);
