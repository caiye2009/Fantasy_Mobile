"use strict";const e=require("../../../common/vendor.js");if(!Array){const g=e.resolveComponent("u-search"),c=e.resolveComponent("u-button"),n=e.resolveComponent("u-input"),r=e.resolveComponent("u-picker"),p=e.resolveComponent("u-datetime-picker"),d=e.resolveComponent("u-loading-icon"),u=e.resolveComponent("u-empty"),l=e.resolveComponent("u-icon"),s=e.resolveComponent("u-tag");(g+c+n+r+p+d+u+l+s)()}const L=()=>"../../../uni_modules/uview-plus/components/u-search/u-search.js",O=()=>"../../../uni_modules/uview-plus/components/u-button/u-button.js",q=()=>"../../../uni_modules/uview-plus/components/u-input/u-input.js",N=()=>"../../../uni_modules/uview-plus/components/u-picker/u-picker.js",K=()=>"../../../uni_modules/uview-plus/components/u-datetime-picker/u-datetime-picker.js",Y=()=>"../../../uni_modules/uview-plus/components/u-loading-icon/u-loading-icon.js",G=()=>"../../../uni_modules/uview-plus/components/u-empty/u-empty.js",H=()=>"../../../uni_modules/uview-plus/components/u-icon/u-icon.js",J=()=>"../../../uni_modules/uview-plus/components/u-tag/u-tag.js";Math||(L+O+q+N+K+Y+G+H+J)();const Q={__name:"index",setup(g){const c=e.ref(""),n=e.ref(!1),r=e.ref(!1),p=e.ref(!1),d=e.ref(!1),u=e.reactive({supplier:"",minStock:"",maxStock:"",addDate:""}),l=e.ref(""),s=e.ref(""),_=e.computed(()=>{const o=b.value.find(a=>a.value===l.value);return o?o.label:"选择原料分类"}),k=e.computed(()=>{const o=x.value.find(a=>a.value===s.value);return o?o.label:"选择库存状态"}),h=e.computed(()=>u.addDate||"选择日期"),b=e.ref([{label:"全部",value:""},{label:"金属材料",value:"metal"},{label:"塑料原料",value:"plastic"},{label:"化工原料",value:"chemical"},{label:"电子元件",value:"electronic"},{label:"包装材料",value:"packaging"}]),x=e.ref([{label:"全部",value:""},{label:"库存充足",value:"available"},{label:"库存紧张",value:"limited"},{label:"缺货",value:"out"}]),m=e.ref(!0),f=e.ref([]),M=o=>({metal:"shopping-cart",plastic:"tags",chemical:"flask",electronic:"wifi",packaging:"gift"})[o]||"cube",D=o=>({metal:"#e74c3c",plastic:"#3498db",chemical:"#9b59b6",electronic:"#f39c12",packaging:"#1abc9c"})[o]||"#95a5a6",T=o=>({available:"库存充足",limited:"库存紧张",out:"缺货"})[o]||"未知",V=o=>({available:"success",limited:"warning",out:"error"})[o]||"info",j=()=>{n.value=!n.value},w=()=>{console.log("搜索关键词:",c.value)},B=o=>{const a=o.value[0];l.value=a.value,r.value=!1,v()},A=o=>{const a=o.value[0];s.value=a.value,p.value=!1,v()},$=o=>{const a=new Date(o.value),t=a.getFullYear(),E=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0");u.addDate=`${t}-${E}-${i}`,d.value=!1,v()},v=()=>{console.log("筛选条件变化:",{...u,category:l.value,stockStatus:s.value})},z=()=>{console.log("应用筛选条件:",{...u,category:l.value,stockStatus:s.value})},S=()=>{Object.keys(u).forEach(o=>{u[o]=""}),l.value="",s.value="",c.value="",F()},P=o=>{e.index.showToast({title:`点击了 ${o.name}`,icon:"none"})},I=()=>{e.index.showToast({title:"点击了新增原料",icon:"none"})},C=e.computed(()=>Object.values(u).some(o=>o!=="")||l.value!==""||s.value!==""||c.value!==""),y=e.computed(()=>{if(!f.value.length)return[];let o=[...f.value];if(c.value){const a=c.value.toLowerCase();o=o.filter(t=>t.name.toLowerCase().includes(a)||t.code.toLowerCase().includes(a))}return l.value&&(o=o.filter(a=>a.categoryValue===l.value)),u.supplier&&(o=o.filter(a=>a.supplier.toLowerCase().includes(u.supplier.toLowerCase()))),s.value&&(o=o.filter(a=>a.stockStatus===s.value)),u.minStock&&(o=o.filter(a=>a.stock>=parseInt(u.minStock))),u.maxStock&&(o=o.filter(a=>a.stock<=parseInt(u.maxStock))),u.addDate&&(o=o.filter(a=>a.addTime.includes(u.addDate))),o}),F=()=>{m.value=!0,setTimeout(()=>{f.value=[{id:1,name:"不锈钢板",code:"MAT001",category:"金属材料",categoryValue:"metal",supplier:"华东钢材有限公司",stock:1500,unit:"吨",stockStatus:"available",addTime:"2023-05-10"},{id:2,name:"ABS塑料",code:"MAT002",category:"塑料原料",categoryValue:"plastic",supplier:"华南化工集团",stock:800,unit:"千克",stockStatus:"limited",addTime:"2023-06-15"},{id:3,name:"硫酸",code:"MAT003",category:"化工原料",categoryValue:"chemical",supplier:"北方化学制品厂",stock:0,unit:"升",stockStatus:"out",addTime:"2023-04-22"},{id:4,name:"电阻",code:"MAT004",category:"电子元件",categoryValue:"electronic",supplier:"深圳电子元器件",stock:1e4,unit:"个",stockStatus:"available",addTime:"2023-07-05"},{id:5,name:"纸箱",code:"MAT005",category:"包装材料",categoryValue:"packaging",supplier:"华东包装制品",stock:5e3,unit:"个",stockStatus:"available",addTime:"2023-06-30"},{id:6,name:"铜线",code:"MAT006",category:"金属材料",categoryValue:"metal",supplier:"华东钢材有限公司",stock:200,unit:"卷",stockStatus:"limited",addTime:"2023-07-12"}],m.value=!1},800)};return e.onMounted(()=>{F()}),(o,a)=>e.e({a:e.o(w),b:e.o(w),c:e.o(t=>c.value=t),d:e.p({placeholder:"输入原料名称或编号搜索","show-action":!1,"bg-color":"#ffffff","border-color":"#e0e0e0",shape:"square",height:"40",modelValue:c.value}),e:e.t(n.value?"收起筛选":"展开筛选"),f:e.o(j),g:e.p({type:"primary",icon:n.value?"arrow-up":"arrow-down",size:"small","custom-style":"height: 40px; display: flex; align-items: center; justify-content: center;"}),h:n.value},n.value?{i:e.o(t=>_.value=t),j:e.p({placeholder:"选择原料分类",readonly:!0,border:"bottom","suffix-icon":"arrow-down","suffix-icon-style":"color: #909399;","input-align":"left","custom-style":"display: flex; align-items: center;",modelValue:_.value}),k:e.o(t=>r.value=!0),l:e.o(v),m:e.o(t=>u.supplier=t),n:e.p({placeholder:"输入供应商名称",clearable:!0,border:"bottom","input-align":"left","custom-style":"display: flex; align-items: center;",modelValue:u.supplier}),o:e.o(t=>k.value=t),p:e.p({placeholder:"选择库存状态",readonly:!0,border:"bottom","suffix-icon":"arrow-down","suffix-icon-style":"color: #909399;","input-align":"left","custom-style":"display: flex; align-items: center;",modelValue:k.value}),q:e.o(t=>p.value=!0),r:e.o(v),s:e.o(t=>u.minStock=t),t:e.p({placeholder:"最小库存量",type:"number",clearable:!0,border:"bottom","input-align":"left","custom-style":"display: flex; align-items: center;",modelValue:u.minStock}),v:e.o(v),w:e.o(t=>u.maxStock=t),x:e.p({placeholder:"最大库存量",type:"number",clearable:!0,border:"bottom","input-align":"left","custom-style":"display: flex; align-items: center;",modelValue:u.maxStock}),y:e.o(t=>h.value=t),z:e.p({placeholder:"选择日期",readonly:!0,border:"bottom","suffix-icon":"calendar","suffix-icon-style":"color: #909399;","input-align":"left","custom-style":"display: flex; align-items: center;",modelValue:h.value}),A:e.o(t=>d.value=!0),B:e.o(z),C:e.p({type:"primary",icon:"search","custom-style":"display: flex; align-items: center; justify-content: center; height: 36px;",text:"查询"}),D:e.o(S),E:e.p({icon:"reload","custom-style":"display: flex; align-items: center; justify-content: center; height: 36px;",text:"重置"})}:{},{F:e.o(B),G:e.o(t=>r.value=!1),H:e.o(t=>r.value=t),I:e.p({columns:[b.value],keyName:"label",title:"选择原料分类",show:r.value}),J:e.o(A),K:e.o(t=>p.value=!1),L:e.p({show:p.value,columns:[x.value],keyName:"label",title:"选择库存状态"}),M:e.o($),N:e.o(t=>d.value=!1),O:e.o(t=>u.addDate=t),P:e.p({show:d.value,mode:"date",title:"选择日期",modelValue:u.addDate}),Q:m.value},m.value?{R:e.p({text:"加载中...",size:"20",color:"#2979ff"})}:y.value.length===0?e.e({T:C.value},C.value?{U:e.o(S)}:{},{V:e.p({mode:"data",icon:"/static/images/empty-data.png",text:"暂无原料数据"})}):{W:e.f(y.value,(t,E,i)=>({a:"86da4f89-15-"+i,b:e.p({name:M(t.categoryValue),size:"24",color:D(t.categoryValue)}),c:e.t(t.name),d:e.t(t.code),e:"86da4f89-16-"+i,f:e.t(t.category),g:"86da4f89-17-"+i,h:e.t(t.supplier),i:"86da4f89-18-"+i,j:e.t(t.stock),k:e.t(t.unit),l:"86da4f89-19-"+i,m:e.t(t.addTime),n:"86da4f89-20-"+i,o:e.p({text:T(t.stockStatus),type:V(t.stockStatus),size:"mini",plain:t.stockStatus!=="available","custom-style":"display: flex; align-items: center;"}),p:t.id,q:e.o(U=>P(t),t.id)})),X:e.p({name:"grid",size:"14",color:"#909399"}),Y:e.p({name:"account",size:"14",color:"#909399"}),Z:e.p({name:"list-dot",size:"14",color:"#909399"}),aa:e.p({name:"calendar",size:"14",color:"#909399"})},{S:y.value.length===0,ab:!m.value},m.value?{}:{ac:e.o(I),ad:e.p({type:"primary",icon:"plus","custom-style":"display: flex; align-items: center; justify-content: center; height: 44px;",text:"新增原料"})})}},R=e._export_sfc(Q,[["__scopeId","data-v-86da4f89"]]);wx.createPage(R);
