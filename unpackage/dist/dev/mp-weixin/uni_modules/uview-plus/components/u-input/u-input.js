"use strict";const s=require("../../../../common/vendor.js"),u=require("./props.js"),h=require("../../libs/mixin/mpMixin.js"),d=require("../../libs/mixin/mixin.js"),t=require("../../libs/function/index.js"),f={name:"u-input",mixins:[h.mpMixin,d.mixin,u.props],data(){return{clearInput:!1,innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e,showPassword:!1}},created(){this.formatter&&(this.innerFormatter=this.formatter)},watch:{modelValue:{immediate:!0,handler(e,r){if(this.changeFromInner||this.innerValue===e){this.changeFromInner=!1;return}this.innerValue=e,this.firstChange===!1&&this.changeFromInner===!1?this.valueChange(this.innerValue,!0):this.firstChange||t.formValidate(this,"change"),this.firstChange=!1,this.changeFromInner=!1}}},computed:{isPassword(){let e=!1;return this.password||this.type=="password"?e=!0:e=!1,this.showPassword&&(e=!1),e},isShowClear(){const{clearable:e,readonly:r,focused:a,innerValue:l,onlyClearableOnFocused:o}=this;return!e||r?!1:o?!!a&&l!=="":l!==""},inputClass(){let e=[],{border:r,disabled:a,shape:l}=this;return r==="surround"&&(e=e.concat(["u-border","u-input--radius"])),e.push(`u-input--${l}`),r==="bottom"&&(e=e.concat(["u-border-bottom","u-input--no-radius"])),e.join(" ")},wrapperStyle(){const e={};return this.disabled&&(e.backgroundColor=this.disabledColor),this.border==="none"?e.padding="0":(e.paddingTop="6px",e.paddingBottom="6px",e.paddingLeft="9px",e.paddingRight="9px"),t.deepMerge(e,t.addStyle(this.customStyle))},inputStyle(){return{color:this.color,fontSize:t.addUnit(this.fontSize),textAlign:this.inputAlign}}},emits:["update:modelValue","focus","blur","change","confirm","clear","keyboardheightchange","nicknamereview"],methods:{setFormatter(e){this.innerFormatter=e},onInput(e){let{value:r=""}=e.detail||{};this.innerValue=r,this.$nextTick(()=>{let a=this.innerFormatter(r);this.innerValue=a,this.valueChange(a)})},onBlur(e){this.$emit("blur",e.detail.value),t.sleep(150).then(()=>{this.focused=!1}),t.formValidate(this,"blur")},onFocus(e){this.focused=!0,this.$emit("focus")},doFocus(){this.$refs["input-native"].focus()},doBlur(){this.$refs["input-native"].blur()},onConfirm(e){this.$emit("confirm",this.innerValue)},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},onnicknamereview(e){this.$emit("nicknamereview",e)},valueChange(e,r=!1){this.clearInput&&(this.innerValue="",this.clearInput=!1),this.$nextTick(()=>{(!r||this.clearInput)&&(this.changeFromInner=!0,this.$emit("change",e),this.$emit("update:modelValue",e)),t.formValidate(this,"change")})},onClear(){this.clearInput=!0,this.innerValue="",this.$nextTick(()=>{this.valueChange(""),this.$emit("clear")})},clickHandler(){(this.disabled||this.readonly)&&s.index.hideKeyboard()}}};Array||s.resolveComponent("u-icon")();const c=()=>"../u-icon/u-icon.js";Math||c();function m(e,r,a,l,o,i){return s.e({a:e.prefixIcon||e.$slots.prefix},e.prefixIcon||e.$slots.prefix?{b:s.p({name:e.prefixIcon,size:"18",customStyle:e.prefixIconStyle})}:{},{c:s.s(i.inputStyle),d:o.showPassword&&e.type=="password"?"text":e.type,e:e.focus,f:e.cursor,g:o.innerValue,h:e.autoBlur,i:e.disabled||e.readonly,j:e.maxlength,k:e.placeholder,l:e.placeholderStyle,m:e.placeholderClass,n:e.confirmType,o:e.confirmHold,p:e.holdKeyboard,q:e.cursorColor,r:e.cursorSpacing,s:e.adjustPosition,t:e.selectionEnd,v:e.selectionStart,w:i.isPassword,x:e.ignoreCompositionEvent,y:s.o((...n)=>i.onInput&&i.onInput(...n)),z:s.o((...n)=>i.onBlur&&i.onBlur(...n)),A:s.o((...n)=>i.onFocus&&i.onFocus(...n)),B:s.o((...n)=>i.onConfirm&&i.onConfirm(...n)),C:s.o((...n)=>i.onkeyboardheightchange&&i.onkeyboardheightchange(...n)),D:s.o((...n)=>i.onnicknamereview&&i.onnicknamereview(...n)),E:s.o((...n)=>i.clickHandler&&i.clickHandler(...n)),F:i.isShowClear},i.isShowClear?{G:s.p({name:"close",size:"11",color:"#ffffff",customStyle:"line-height: 12px"}),H:s.o((...n)=>i.onClear&&i.onClear(...n))}:{},{I:(e.type=="password"||e.password)&&e.passwordVisibilityToggle},(e.type=="password"||e.password)&&e.passwordVisibilityToggle?{J:s.o(n=>o.showPassword=!o.showPassword),K:s.p({name:o.showPassword?"eye-off":"eye-fill",size:"18"})}:{},{L:e.suffixIcon||e.$slots.suffix},e.suffixIcon||e.$slots.suffix?{M:s.p({name:e.suffixIcon,size:"18",customStyle:e.suffixIconStyle})}:{},{N:s.n(i.inputClass),O:s.s(i.wrapperStyle)})}const p=s._export_sfc(f,[["render",m],["__scopeId","data-v-df79975b"]]);wx.createComponent(p);
