"use strict";const d=require("./props.js"),h=require("../../libs/mixin/mpMixin.js"),a=require("../../libs/mixin/mixin.js"),t=require("../../libs/function/index.js"),r=require("../../../../common/vendor.js"),l={name:"u-image",mixins:[h.mpMixin,a.mixin,d.props],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(i){i?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{transStyle(){let i={};return this.loading||this.isError||this.width=="100%"||this.mode!="heightFix"?i.width=t.addUnit(this.width):i.width="fit-content",this.loading||this.isError||this.height=="100%"||this.mode!="widthFix"?i.height=t.addUnit(this.height):i.height="fit-content",i},wrapStyle(){let i={};return this.loading||this.isError||this.width=="100%"||this.mode!="heightFix"?i.width=t.addUnit(this.width):i.width="fit-content",this.loading||this.isError||this.height=="100%"||this.mode!="widthFix"?i.height=t.addUnit(this.height):i.height="fit-content",i.borderRadius=this.shape=="circle"?"10000px":t.addUnit(this.radius),i.overflow=this.radius>0?"hidden":"visible",t.deepMerge(i,t.addStyle(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{addUnit:t.addUnit,onClick(i){this.$emit("click",i)},onErrorHandler(i){this.loading=!1,this.isError=!0,this.$emit("error",i)},onLoadHandler(i){this.loading=!1,this.isError=!1,this.$emit("load",i),this.removeBgColor()},removeBgColor(){}}};if(!Array){const i=r.resolveComponent("u-icon"),n=r.resolveComponent("u-transition");(i+n)()}const u=()=>"../u-icon/u-icon.js",m=()=>"../u-transition/u-transition.js";Math||(u+m)();function c(i,n,w,f,s,e){return r.e({a:!s.isError},s.isError?{}:{b:i.src,c:i.mode,d:r.o((...o)=>e.onErrorHandler&&e.onErrorHandler(...o)),e:r.o((...o)=>e.onLoadHandler&&e.onLoadHandler(...o)),f:i.showMenuByLongpress,g:i.lazyLoad,h:e.addUnit(i.width),i:e.addUnit(i.height),j:i.shape=="circle"?"10000px":e.addUnit(i.radius)},{k:i.showLoading&&s.loading},i.showLoading&&s.loading?{l:r.p({name:i.loadingIcon}),m:i.shape=="circle"?"50%":e.addUnit(i.radius),n:this.bgColor,o:e.addUnit(i.width),p:e.addUnit(i.height)}:{},{q:i.showError&&s.isError&&!s.loading},i.showError&&s.isError&&!s.loading?{r:r.p({name:i.errorIcon}),s:i.shape=="circle"?"50%":e.addUnit(i.radius),t:this.bgColor,v:e.addUnit(i.width),w:e.addUnit(i.height)}:{},{x:r.o((...o)=>e.onClick&&e.onClick(...o)),y:r.s(e.wrapStyle),z:r.s(s.backgroundStyle),A:r.s(e.transStyle),B:r.p({mode:"fade",show:s.show,duration:i.fade?1e3:0})})}const g=r._export_sfc(l,[["render",c],["__scopeId","data-v-abebd402"]]);wx.createComponent(g);
